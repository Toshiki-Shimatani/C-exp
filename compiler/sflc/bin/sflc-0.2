#!/bin/sh
SCALA_CMD=scala
LIB_DIR=../lib
JAR=sflc-v0.2.jar

verbose=false
#verbose=true

#$SCALA $LIB_DIR/$JAR $*

if [ -z "$SFLC_HOME" ]; then
    PRG=$0
    progname=`basename "$0"`

    while [ -h "$PRG" ] ; do
	ls=`ls -ld "$PRG"`
	link=`expr "$ls" : '.*-> \(.*\)$'`
	if expr "$link" : '.*/.*' > /dev/null; then
	    PRG="$link"
	else
	    PRG="`dirname $PRG`/$link"
	fi
    done

    SFLC_HOME_0=`dirname "$PRG"`
    SFLC_HOME_0=`dirname "$SFLC_HOME_0"`
    if [ x"${SFLC_HOME_0}" = "x." ]; then
	SFLC_HOME=".."
    fi
    if [ -d "${SFLC_HOME_0}/lib" ]; then
	SFLC_HOME="${SFLC_HOME_0}"
    fi
fi

if [ -z "$SCALA_HOME" ]; then
    SCALA_CMD='scala'
else
    SCALA_CMD="$SCALA_HOME/bin/scala"
fi

LAUNCHER_JAR="$SFLC_HOME/lib/$JAR"


if $verbose; then
    echo "PRG: " $PRG
    echo "progname: " $progname
    echo "SFLC_HOME_0: " $SFLC_HOME_0
    echo "SFLC_HOME: " $SFLC_HOME
    echo "SCALA_CMD: " $SCALA_CMD
    echo "LAUNCHER_JAR: " $LAUNCHER_JAR

fi

COMMAND="$SCALA_CMD -Dsflc.home=$SFLC_HOME -Dsflc.scala.command=$SCALA_CMD $LAUNCHER_JAR $@"

# echo "COMMAND: " $COMMAND
exec $COMMAND 

# EOF


